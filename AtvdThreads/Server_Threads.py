from threading import Thread
from time import sleep 
import socket

port = 10507
address = '0.0.0.0'

acessos = 0 

def handle_http_request(request): #joga a mensagem que receber do cliente
    pass 

def handle_http_response(): 
    response = f'''
HTTP/1.0 200 OK
Date: True. 14 Mar 2023 15:11:00 GMT-3
Server: AulaRedes/1.0
Content_Type: text/HTML

<html> 
    <head>
        <title> 
            Aula
        </title>
    </head>
    <body> 
        <h1> Aula de Redes de Computadores </h1> 
        <h2> IFPR Cascavel </h2> 
        Este servidor foi acessado {acessos} vezes. <br>

        <img src="data:image/jpeg;base64,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">


    </body> 
</html> 
    '''

    return response

class ThreadServer(Thread): 
    def __init__(self, conn, addr): 
        Thread.__init__(self)
        self.conn = conn 
        self.addr = addr

    def run(self): 
        data = self.conn.recv(4096)
        msg_recv = data.decode()

        handle_http_request(msg_recv)
        msg_env = handle_http_response()
        self.conn.send(msg_env.encode())

def main(): #inicio das threads
    global acessos
    server = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
    server.bind((address, port)) #bind reserva pro sistema operacional a porta pra vc 
    server.listen()

    while True: 
        print('== Servidor aguardando conexões ==')
        acessos +=1 
        conn, addr = server.accept()
        ThreadServer(conn, addr).start()


if __name__ == '__main__': #name é pra ver em wual função ta -- se ele estiver na função --main--......
    main()
